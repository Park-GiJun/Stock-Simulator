# 2026-02-23_01: 종목별 체결 내역 + 주문 내역(REJECTED 포함) API 및 프론트엔드 UI 추가

## 변경 사항

### 1. 종목별 체결 내역 조회 API 추가
- `GET /api/trading/trades/stock/{stockId}` 엔드포인트 추가
- `GetTradeHistoryUseCase`에 `getTradesByStock(stockId)` 메서드 추가
- `PortfolioQueryHandler`에 구현

### 2. 종목별 주문 내역 조회 API 추가 (REJECTED 포함)
- `GET /api/trading/orders/stock/{stockId}` 엔드포인트 추가
- `OrderPersistencePort`에 `findByStockId(stockId)` 메서드 추가
- `OrderJpaRepository`에 `findByStockIdOrderByCreatedAtDesc` 쿼리 추가
- `OrderHistoryResponse` DTO 생성
- REJECTED, FILLED, PENDING 등 모든 상태의 주문이 조회됨

### 3. API Gateway 보안 화이트리스트 업데이트
- `/trading-service/api/trading/trades/stock/**` 공개 경로 추가
- `/trading-service/api/trading/orders/stock/**` 공개 경로 추가
- `/trading-service/api/trading/portfolio/**` 공개 경로 추가

### 4. 종목 상세 페이지에 체결 내역 + 주문 내역 섹션 추가 (Frontend)
- 체결 내역: 시각, 체결가, 수량, 금액, 매수/매도자 유형 (최대 50건)
- 주문 내역: 시각, 매수/매도, 지정가/시장가, 가격, 수량, 체결수량, 상태(체결/거부/대기), 투자자유형 (최대 100건)

## 수정 파일 목록
| 파일 | 변경 |
|------|------|
| `backend/trading-service/.../port/in/portfolio/GetTradeHistoryUseCase.kt` | `getTradesByStock` 메서드 추가 |
| `backend/trading-service/.../handler/portfolio/PortfolioQueryHandler.kt` | `getTradesByStock` 구현 |
| `backend/trading-service/.../port/out/order/OrderPersistencePort.kt` | `findByStockId` 메서드 추가 |
| `backend/trading-service/.../persistence/order/repository/OrderJpaRepository.kt` | `findByStockIdOrderByCreatedAtDesc` 추가 |
| `backend/trading-service/.../persistence/order/adapter/OrderPersistenceAdapter.kt` | `findByStockId` 구현 |
| `backend/trading-service/.../adapter/in/web/OrderBookWebAdapter.kt` | 체결+주문 내역 엔드포인트 추가 |
| `backend/trading-service/.../adapter/in/web/dto/OrderHistoryResponse.kt` | 신규 DTO 생성 |
| `backend/api-gateway/.../application.yml` | 공개 경로 추가 |
| `backend/api-gateway/.../application-local.yml` | 공개 경로 추가 |
| `frontend/src/lib/api/tradingApi.ts` | `getStockTrades`, `getStockOrders` API 함수 추가 |
| `frontend/src/routes/(desktop)/stocks/[stockId]/+page.svelte` | 체결+주문 내역 UI 섹션 추가 |

## 배포 시 필요 작업
- trading-service, api-gateway 재빌드 및 재배포
- 프론트엔드 재빌드
