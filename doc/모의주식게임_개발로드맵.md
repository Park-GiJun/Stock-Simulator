# 📅 모의 주식 게임 개발 로드맵

## 전체 타임라인 개요

```
Phase 0: 인프라 & 공통 셋업        [2주]
Phase 1: 핵심 서비스 (MVP)         [4주]
Phase 2: 거래 시스템               [3주]
Phase 3: 자동화 & 이벤트           [3주]
Phase 4: 시즌 & 랭킹               [2주]
Phase 5: 프론트엔드 통합           [3주]
Phase 6: AI 연동 & 고도화          [2주+]
─────────────────────────────────────────
총 예상 기간: 약 19주 (4~5개월)
```

---

## Phase 0: 인프라 & 공통 셋업 (2주)

### 목표
개발 환경 구축 및 MSA 기반 인프라 준비

### Week 1

| 작업 | 산출물 |
|------|--------|
| 프로젝트 구조 셋업 | 멀티모듈 Gradle 프로젝트 |
| Eureka Server 구축 | eureka-server 모듈 |
| API Gateway 구축 | api-gateway 모듈 |
| 공통 모듈 정의 | common 모듈 (DTO, Exception, Utils) |

### Week 2

| 작업 | 산출물 |
|------|--------|
| Docker Compose 환경 | PostgreSQL, MongoDB, Redis, Kafka, ELK |
| Kafka 토픽 설계 | 토픽 생성 스크립트 |
| CI/CD 파이프라인 | GitHub Actions or Jenkins |

### 체크포인트

- [ ] Eureka 대시보드 접속 가능
- [ ] Gateway를 통한 라우팅 테스트
- [ ] Kafka 토픽 생성 확인
- [ ] 각 DB 접속 확인

---

## Phase 1: 핵심 서비스 MVP (4주)

### 목표
유저 인증 + 주식 기본 정보 조회

### Week 1-2: User Service

| 작업 | 상세 |
|------|------|
| 헥사고날 구조 셋업 | adapter/application/domain 패키지 |
| 유저 도메인 | User 엔티티, Repository |
| 인증 기능 | 회원가입, 로그인, JWT 발급 |
| API 구현 | POST /auth/signup, POST /auth/login |
| Gateway 연동 | 인증 필터 적용 |

### Week 3-4: Stock Service

| 작업 | 상세 |
|------|------|
| 주식 도메인 | Stock 엔티티, Status Table |
| 초기 데이터 생성 | 500개 종목 시드 데이터 |
| 시세 관리 | Redis 기반 실시간 시세 |
| API 구현 | GET /stocks, GET /stocks/{id} |
| WebSocket 셋업 | 시세 푸시 기반 구조 |

### 체크포인트

- [ ] 회원가입/로그인 동작
- [ ] JWT 인증 통과
- [ ] 500개 종목 조회 가능
- [ ] Redis에 시세 데이터 저장

---

## Phase 2: 거래 시스템 (3주)

### 목표
호가창 + 주문 체결 + 잔고 관리

### Week 5-6: Trading Service (Core)

| 작업 | 상세 |
|------|------|
| 주문 도메인 | Order 엔티티 (시장가) |
| 잔고 도메인 | Balance, Portfolio 엔티티 |
| 주문 접수 | POST /orders (매수/매도) |
| Kafka 연동 | order.created 발행 |

### Week 7: Stock Service (호가창 & 체결)

| 작업 | 상세 |
|------|------|
| 호가창 구현 | Redis Sorted Set 기반 |
| 체결 엔진 | 가격/시간 우선순위 매칭 |
| 주가 변동 로직 | 체결에 따른 가격 계산 |
| Kafka 연동 | order.matched, price.updated 발행 |
| WebSocket | 호가창/시세 실시간 푸시 |

### 체크포인트

- [ ] 매수/매도 주문 생성
- [ ] 호가창에 주문 반영
- [ ] 체결 시 잔고 변경
- [ ] 체결 시 주가 변동
- [ ] WebSocket으로 시세 수신

---

## Phase 3: 자동화 & 이벤트 (3주)

### 목표
NPC 자동 거래 + 이벤트 시스템

### Week 8-9: Scheduler Service

| 작업 | 상세 |
|------|------|
| 기관 투자자 생성 | 10개 기관 초기 데이터 |
| 개인 NPC 생성 | 1,000명 NPC 초기 데이터 |
| 투자 규칙 엔진 | 성향별 매매 로직 |
| 스케줄링 | 게임 시간 기반 자동 매매 |
| 수입 지급 | 일급/주급 자동 지급 |
| Kafka 연동 | schedule.trade 발행 |

### Week 10: Event Service + News Service

| 작업 | 상세 |
|------|------|
| 이벤트 도메인 | Event 엔티티 (사회/산업/회사) |
| 이벤트 생성 | 랜덤 이벤트 발생 로직 |
| 주가 영향 계산 | 이벤트 → 주가 변동 |
| 뉴스 저장 | MongoDB 저장 |
| 뉴스 검색 | Elasticsearch 연동 |
| API 구현 | GET /news, GET /news/search |

### 체크포인트

- [ ] NPC 자동 매매 동작
- [ ] 기관/개인 수입 지급
- [ ] 이벤트 발생 시 주가 변동
- [ ] 뉴스 조회/검색 가능

---

## Phase 4: 시즌 & 랭킹 (2주)

### 목표
시즌 관리 + 실시간 랭킹

### Week 11-12: Season Service

| 작업 | 상세 |
|------|------|
| 시즌 도메인 | Season 엔티티 |
| 랭킹 계산 | 수익률/총자산/거래량 |
| Redis 랭킹 | Sorted Set 기반 실시간 랭킹 |
| 시즌 종료 처리 | 랭킹 확정, 데이터 리셋 |
| API 구현 | GET /ranking, GET /seasons |
| WebSocket | 랭킹 변동 푸시 |

### 체크포인트

- [ ] 실시간 랭킹 조회
- [ ] 거래 시 랭킹 갱신
- [ ] 시즌 히스토리 저장

---

## Phase 5: 프론트엔드 통합 (3주)

### 목표
SvelteKit 기반 전체 UI 완성

> 💡 프론트엔드는 Phase 1부터 병렬 진행 가능

### Week 13: 기본 구조 & 인증

| 작업 | 상세 |
|------|------|
| 프로젝트 셋업 | SvelteKit + TailwindCSS |
| 레이아웃 | 공통 헤더/사이드바/푸터 |
| 인증 페이지 | 로그인, 회원가입 |
| 인증 상태 관리 | JWT 저장, 자동 갱신 |

### Week 14: 핵심 페이지

| 작업 | 상세 |
|------|------|
| Dashboard | 시장 현황, TOP 종목, 게임 시간 |
| 주식투자 | 종목 목록, 검색, 필터 |
| 종목 상세 | 차트 (1분봉), 호가창, 매매 폼 |
| WebSocket 연동 | 실시간 시세/호가 |

### Week 15: 부가 페이지

| 작업 | 상세 |
|------|------|
| News | 뉴스 피드, 검색, 필터 |
| 마이페이지 | 포트폴리오, 자산, 거래내역 |
| 랭킹 | 실시간 랭킹, 시즌 히스토리 |
| 반응형 | 모바일 대응 |

### 체크포인트

- [ ] 전체 페이지 동작
- [ ] 실시간 데이터 반영
- [ ] 매수/매도 정상 동작
- [ ] 모바일 UI 확인

---

## Phase 6: AI 연동 & 고도화 (2주+)

### 목표
AI 기반 이벤트 생성 + 최적화

### Week 16-17+: AI Service

| 작업 | 상세 |
|------|------|
| AI 서빙 구조 | Kotlin 기반 API |
| 이벤트 생성 | LLM 연동 뉴스/이벤트 생성 |
| NPC 고도화 | AI 기반 투자 판단 (선택) |
| 성능 최적화 | 부하 테스트, 튜닝 |
| 모니터링 | Kibana 대시보드 구성 |

---

## 📊 서비스 의존성 다이어그램

```
                    ┌─────────┐
                    │  User   │
                    │ Service │
                    └────┬────┘
                         │ 인증
         ┌───────────────┼───────────────┐
         ▼               ▼               ▼
    ┌─────────┐    ┌─────────┐    ┌─────────┐
    │  Stock  │◄───│ Trading │    │ Season  │
    │ Service │    │ Service │    │ Service │
    └────┬────┘    └────┬────┘    └────┬────┘
         │              │              │
         │    ┌─────────┴─────────┐    │
         │    ▼                   ▼    │
         │ ┌─────────┐      ┌─────────┐│
         └►│Scheduler│      │  Event  │◄┘
           │ Service │      │ Service │
           └─────────┘      └────┬────┘
                                 │
                            ┌────▼────┐
                            │  News   │
                            │ Service │
                            └─────────┘
```

---

## 🎯 우선순위 매트릭스

| 우선순위 | 서비스/기능 | 이유 |
|----------|------------|------|
| P0 (필수) | User, Stock, Trading | 핵심 MVP |
| P1 (중요) | Scheduler, Event | 게임성 핵심 |
| P2 (권장) | News, Season | 부가 기능 |
| P3 (선택) | AI 연동 | 고도화 |

---

## 📋 마일스톤 요약

| 마일스톤 | 목표 | 예상 완료 |
|----------|------|----------|
| M1: 인프라 완료 | MSA 기반 구조 동작 | 2주차 |
| M2: 인증 완료 | 회원가입/로그인 | 4주차 |
| M3: 조회 MVP | 주식 목록/상세 조회 | 4주차 |
| M4: 거래 MVP | 매수/매도 체결 | 7주차 |
| M5: 자동화 | NPC 자동 거래 | 9주차 |
| M6: 이벤트 | 이벤트/뉴스 시스템 | 10주차 |
| M7: 랭킹 | 실시간 랭킹 | 12주차 |
| M8: UI 완성 | 전체 프론트엔드 | 15주차 |
| M9: AI 연동 | AI 이벤트 생성 | 17주차+ |

---

## 🔄 병렬 개발 전략

```
Backend Track                          Frontend Track
─────────────────────────────────────────────────────────────
Week 1-2   : Phase 0 (인프라)          
Week 3-4   : Phase 1 (User, Stock)     Week 3-4  : 프로젝트 셋업, 인증 UI
Week 5-7   : Phase 2 (Trading)         Week 5-7  : Dashboard, 주식 목록
Week 8-10  : Phase 3 (Scheduler, Event) Week 8-10 : 종목 상세, 매매 UI
Week 11-12 : Phase 4 (Season)          Week 11-12: News, 마이페이지
Week 13-15 : 통합 테스트               Week 13-15: 랭킹, 반응형, 통합
Week 16+   : Phase 6 (AI)              Week 16+  : 고도화
```

---

## 📝 리스크 및 대응

| 리스크 | 영향도 | 대응 방안 |
|--------|--------|----------|
| 체결 엔진 복잡도 | 높음 | 단순 시장가부터 시작, 점진적 고도화 |
| 실시간 성능 | 중간 | Redis 최적화, WebSocket 커넥션 풀 관리 |
| AI 연동 지연 | 낮음 | 규칙 기반 이벤트로 우선 대체 |
| 데이터 정합성 | 높음 | Kafka 트랜잭션, 보상 트랜잭션 패턴 적용 |

---

*문서 버전: v1.0*  
*최종 수정일: 2025년 1월*
