# ğŸ”§ ë°±ì—”ë“œ ì‘ì—… ë‹¨ê³„ ê°€ì´ë“œ

> ì´ ë¬¸ì„œëŠ” Stock-Simulator ë°±ì—”ë“œ ê°œë°œ ì‹œ ê° ì„œë¹„ìŠ¤ë³„ ì‘ì—… ë‹¨ê³„ë¥¼ ì •ì˜í•©ë‹ˆë‹¤.

---

## ğŸ“Œ í˜„ì¬ ìƒíƒœ ìš”ì•½

### ì™„ë£Œëœ ì‘ì—…
- âœ… ë©€í‹°ëª¨ë“ˆ Gradle í”„ë¡œì íŠ¸ êµ¬ì¡°
- âœ… ê³µí†µ ëª¨ë“ˆ (common) - ApiResponse, BusinessException, DomainEvent
- âœ… Eureka Server ì„¤ì • ì™„ì„± (Actuator/Prometheus í¬í•¨)
- âœ… API Gateway ì„¤ì • ì™„ì„± (CORS, ë¼ìš°íŒ…, WebSocket ì§€ì›)
- âœ… ê° ì„œë¹„ìŠ¤ Application í´ë˜ìŠ¤ ìƒì„±
- âœ… Docker Compose í™˜ê²½ (MySQL, MongoDB, Redis, Kafka, ELK, Prometheus, Grafana)
- âœ… ê³µí†µ ì˜ˆì™¸ ì²˜ë¦¬ (GlobalExceptionHandler, íŠ¹í™” ì˜ˆì™¸ í´ë˜ìŠ¤)
- âœ… ê³µí†µ DTO (ApiResponse, PageResponse, Enums)
- âœ… Kafka í† í”½ ë° ì´ë²¤íŠ¸ ì •ì˜ (DomainEvent í´ë˜ìŠ¤ë“¤)
- âœ… ê³µí†µ ì„¤ì • í´ë˜ìŠ¤ (JacksonConfig, KafkaConfig, RedissonConfig)
- âœ… ìœ í‹¸ë¦¬í‹° (GameTimeUtil, PriceUtil)
- âœ… Prometheus & Grafana ëª¨ë‹ˆí„°ë§ ì„¤ì •

### ë¯¸ì™„ë£Œ ì‘ì—…
- â¬œ ê° ì„œë¹„ìŠ¤ë³„ ë„ë©”ì¸/ì• í”Œë¦¬ì¼€ì´ì…˜/ì–´ëŒ‘í„° êµ¬í˜„
- â¬œ Flyway ë§ˆì´ê·¸ë ˆì´ì…˜ ìŠ¤í¬ë¦½íŠ¸
- â¬œ WebSocket ì‹¤ì‹œê°„ í†µì‹ 

---

## ğŸ—ï¸ ì„œë¹„ìŠ¤ë³„ ì‘ì—… ë‹¨ê³„

### ê³µí†µ ì‘ì—… ë‹¨ê³„ (ëª¨ë“  ì„œë¹„ìŠ¤ ì ìš©)

```
1. í—¥ì‚¬ê³ ë‚  ì•„í‚¤í…ì²˜ íŒ¨í‚¤ì§€ êµ¬ì¡° ìƒì„±
2. ë„ë©”ì¸ ì—”í‹°í‹° ì •ì˜
3. Flyway ë§ˆì´ê·¸ë ˆì´ì…˜ ìŠ¤í¬ë¦½íŠ¸ ì‘ì„±
4. Repository ì¸í„°í˜ì´ìŠ¤ ì •ì˜ (out port)
5. JPA Repository êµ¬í˜„ (adapter)
6. ìœ ìŠ¤ì¼€ì´ìŠ¤ ì¸í„°í˜ì´ìŠ¤ ì •ì˜ (in port)
7. ì„œë¹„ìŠ¤ êµ¬í˜„ (application)
8. REST Controller êµ¬í˜„ (adapter)
9. Kafka Producer/Consumer ì—°ë™
10. ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ & í†µí•© í…ŒìŠ¤íŠ¸
11. Swagger ë¬¸ì„œí™”
```

---

## âœ… Phase 0: ì¸í”„ë¼ ë³´ì™„ (ì™„ë£Œ)

### ì‘ì—… ëª©ë¡

| # | ì‘ì—… | íŒŒì¼/ìœ„ì¹˜ | ìƒíƒœ |
|---|------|----------|------|
| 0-1 | Eureka Server ì„¤ì • ì™„ì„± | `eureka-server/src/main/resources/application.yml` | âœ… |
| 0-2 | API Gateway ë¼ìš°íŒ… ì„¤ì • | `api-gateway/src/main/resources/application.yml` | âœ… |
| 0-3 | ê³µí†µ ì˜ˆì™¸ ì²˜ë¦¬ ê³ ë„í™” | `common/exception/` | âœ… |
| 0-4 | ê³µí†µ DTO ì¶”ê°€ | `common/dto/` | âœ… |
| 0-5 | Kafka í† í”½ ì •ì˜ | `common/event/DomainEvent.kt` | âœ… |
| 0-6 | ê³µí†µ ì„¤ì • í´ë˜ìŠ¤ | `common/config/` | âœ… |
| 0-7 | Prometheus ì„¤ì • | `infra/prometheus/prometheus.yml` | âœ… |
| 0-8 | Grafana ëŒ€ì‹œë³´ë“œ | `infra/grafana/provisioning/dashboards/` | âœ… |

### ìƒì„±ëœ íŒŒì¼ ëª©ë¡

**common ëª¨ë“ˆ:**
- `common/dto/ApiResponse.kt` - API ì‘ë‹µ ê³µí†µ í¬ë§·
- `common/dto/Enums.kt` - ê³µí†µ Enum ì •ì˜ (Sector, OrderType, OrderStatus ë“±)
- `common/exception/BusinessException.kt` - ì˜ˆì™¸ í´ë˜ìŠ¤ ë° ErrorCode
- `common/exception/GlobalExceptionHandler.kt` - ì „ì—­ ì˜ˆì™¸ ì²˜ë¦¬
- `common/event/DomainEvent.kt` - Kafka í† í”½ ë° ì´ë²¤íŠ¸ DTO
- `common/config/JacksonConfig.kt` - JSON ì§ë ¬í™” ì„¤ì •
- `common/config/KafkaConfig.kt` - Kafka Producer/Consumer ì„¤ì •
- `common/config/RedissonConfig.kt` - Redis ì—°ê²° ì„¤ì •
- `common/util/GameTimeUtil.kt` - ê²Œì„ ì‹œê°„ ê´€ë¦¬ ìœ í‹¸
- `common/util/PriceUtil.kt` - í˜¸ê°€ ë‹¨ìœ„/ê°€ê²© ê³„ì‚° ìœ í‹¸

**ì¸í”„ë¼:**
- `infra/prometheus/prometheus.yml` - ì „ì²´ ì„œë¹„ìŠ¤ ìŠ¤í¬ë˜í•‘ ì„¤ì •
- `infra/grafana/provisioning/dashboards/stock-simulator-overview.json` - ì„œë¹„ìŠ¤ ëª¨ë‹ˆí„°ë§ ëŒ€ì‹œë³´ë“œ

### ì²´í¬ë¦¬ìŠ¤íŠ¸
- [x] `http://localhost:8761` Eureka ëŒ€ì‹œë³´ë“œ ì ‘ì†
- [x] `http://localhost:8080` Gateway ë¼ìš°íŒ… ë™ì‘
- [x] `http://localhost:9091` Prometheus ì ‘ì†
- [x] `http://localhost:3001` Grafana ì ‘ì† (admin/stocksim123)
- [x] ê° DB ì»¨í…Œì´ë„ˆ ì ‘ì† í™•ì¸

---

## ğŸ‘¤ Phase 1-A: User Service

### í—¥ì‚¬ê³ ë‚  íŒ¨í‚¤ì§€ êµ¬ì¡°

```
user-service/src/main/kotlin/com/stocksimulator/userservice/
â”œâ”€â”€ domain/
â”‚   â”œâ”€â”€ model/
â”‚   â”‚   â”œâ”€â”€ User.kt
â”‚   â”‚   â”œâ”€â”€ UserRole.kt
â”‚   â”‚   â””â”€â”€ RefreshToken.kt
â”‚   â””â”€â”€ repository/
â”‚       â””â”€â”€ UserRepository.kt (interface)
â”œâ”€â”€ application/
â”‚   â”œâ”€â”€ port/
â”‚   â”‚   â”œâ”€â”€ in/
â”‚   â”‚   â”‚   â”œâ”€â”€ SignUpUseCase.kt
â”‚   â”‚   â”‚   â”œâ”€â”€ SignInUseCase.kt
â”‚   â”‚   â”‚   â””â”€â”€ GetUserUseCase.kt
â”‚   â”‚   â””â”€â”€ out/
â”‚   â”‚       â”œâ”€â”€ SaveUserPort.kt
â”‚   â”‚       â”œâ”€â”€ LoadUserPort.kt
â”‚   â”‚       â””â”€â”€ TokenPort.kt
â”‚   â””â”€â”€ service/
â”‚       â”œâ”€â”€ AuthService.kt
â”‚       â””â”€â”€ UserService.kt
â””â”€â”€ adapter/
    â”œâ”€â”€ in/
    â”‚   â””â”€â”€ web/
    â”‚       â”œâ”€â”€ AuthController.kt
    â”‚       â”œâ”€â”€ UserController.kt
    â”‚       â””â”€â”€ dto/
    â”‚           â”œâ”€â”€ SignUpRequest.kt
    â”‚           â”œâ”€â”€ SignInRequest.kt
    â”‚           â”œâ”€â”€ TokenResponse.kt
    â”‚           â””â”€â”€ UserResponse.kt
    â””â”€â”€ out/
        â”œâ”€â”€ persistence/
        â”‚   â”œâ”€â”€ UserJpaRepository.kt
        â”‚   â”œâ”€â”€ UserPersistenceAdapter.kt
        â”‚   â””â”€â”€ entity/
        â”‚       â””â”€â”€ UserJpaEntity.kt
        â””â”€â”€ security/
            â”œâ”€â”€ JwtTokenProvider.kt
            â””â”€â”€ JwtTokenAdapter.kt
```

### ì‘ì—… ë‹¨ê³„

| ë‹¨ê³„ | ì‘ì—… | ì‚°ì¶œë¬¼ |
|------|------|--------|
| 1-1 | íŒ¨í‚¤ì§€ êµ¬ì¡° ìƒì„± | ë””ë ‰í† ë¦¬ êµ¬ì¡° |
| 1-2 | User ë„ë©”ì¸ ëª¨ë¸ ì •ì˜ | `User.kt`, `UserRole.kt` |
| 1-3 | Flyway ë§ˆì´ê·¸ë ˆì´ì…˜ | `V1__create_user_table.sql` |
| 1-4 | JPA Entity ì •ì˜ | `UserJpaEntity.kt` |
| 1-5 | Repository êµ¬í˜„ | `UserJpaRepository.kt`, `UserPersistenceAdapter.kt` |
| 1-6 | JWT í† í° ë¡œì§ | `JwtTokenProvider.kt` |
| 1-7 | UseCase ì¸í„°í˜ì´ìŠ¤ | `SignUpUseCase.kt`, `SignInUseCase.kt` |
| 1-8 | Service êµ¬í˜„ | `AuthService.kt`, `UserService.kt` |
| 1-9 | DTO ì •ì˜ | Request/Response DTOs |
| 1-10 | Controller êµ¬í˜„ | `AuthController.kt`, `UserController.kt` |
| 1-11 | Security ì„¤ì • | `SecurityConfig.kt` |
| 1-12 | í…ŒìŠ¤íŠ¸ ì‘ì„± | Unit & Integration Tests |

### API ëª…ì„¸

| Method | Endpoint | ì„¤ëª… |
|--------|----------|------|
| POST | `/api/v1/auth/signup` | íšŒì›ê°€ì… |
| POST | `/api/v1/auth/signin` | ë¡œê·¸ì¸ |
| POST | `/api/v1/auth/refresh` | í† í° ê°±ì‹  |
| GET | `/api/v1/users/me` | ë‚´ ì •ë³´ ì¡°íšŒ |
| PUT | `/api/v1/users/me` | ë‚´ ì •ë³´ ìˆ˜ì • |

### ì²´í¬ë¦¬ìŠ¤íŠ¸
- [ ] íšŒì›ê°€ì… API ë™ì‘
- [ ] ë¡œê·¸ì¸ í›„ JWT ë°œê¸‰
- [ ] Gateway ì¸ì¦ í•„í„° í†µê³¼
- [ ] ì¸ì¦ëœ ìš”ì²­ìœ¼ë¡œ ë‚´ ì •ë³´ ì¡°íšŒ

---

## ğŸ“ˆ Phase 1-B: Stock Service

### í—¥ì‚¬ê³ ë‚  íŒ¨í‚¤ì§€ êµ¬ì¡°

```
stock-service/src/main/kotlin/com/stocksimulator/stockservice/
â”œâ”€â”€ domain/
â”‚   â”œâ”€â”€ model/
â”‚   â”‚   â”œâ”€â”€ Stock.kt
â”‚   â”‚   â”œâ”€â”€ Sector.kt
â”‚   â”‚   â”œâ”€â”€ MarketCapGrade.kt
â”‚   â”‚   â”œâ”€â”€ StockPrice.kt
â”‚   â”‚   â””â”€â”€ OrderBook.kt
â”‚   â””â”€â”€ repository/
â”‚       â”œâ”€â”€ StockRepository.kt
â”‚       â””â”€â”€ StockPriceRepository.kt
â”œâ”€â”€ application/
â”‚   â”œâ”€â”€ port/
â”‚   â”‚   â”œâ”€â”€ in/
â”‚   â”‚   â”‚   â”œâ”€â”€ GetStockUseCase.kt
â”‚   â”‚   â”‚   â”œâ”€â”€ GetStockPriceUseCase.kt
â”‚   â”‚   â”‚   â””â”€â”€ GetOrderBookUseCase.kt
â”‚   â”‚   â””â”€â”€ out/
â”‚   â”‚       â”œâ”€â”€ LoadStockPort.kt
â”‚   â”‚       â”œâ”€â”€ StockPriceCachePort.kt
â”‚   â”‚       â””â”€â”€ OrderBookCachePort.kt
â”‚   â””â”€â”€ service/
â”‚       â”œâ”€â”€ StockQueryService.kt
â”‚       â””â”€â”€ StockPriceService.kt
â””â”€â”€ adapter/
    â”œâ”€â”€ in/
    â”‚   â””â”€â”€ web/
    â”‚       â”œâ”€â”€ StockController.kt
    â”‚       â”œâ”€â”€ StockPriceController.kt
    â”‚       â””â”€â”€ dto/
    â”œâ”€â”€ out/
    â”‚   â”œâ”€â”€ persistence/
    â”‚   â”‚   â”œâ”€â”€ StockJpaRepository.kt
    â”‚   â”‚   â””â”€â”€ StockPersistenceAdapter.kt
    â”‚   â””â”€â”€ cache/
    â”‚       â”œâ”€â”€ StockPriceRedisAdapter.kt
    â”‚       â””â”€â”€ OrderBookRedisAdapter.kt
    â””â”€â”€ event/
        â””â”€â”€ StockEventConsumer.kt
```

### ì‘ì—… ë‹¨ê³„

| ë‹¨ê³„ | ì‘ì—… | ì‚°ì¶œë¬¼ |
|------|------|--------|
| 2-1 | íŒ¨í‚¤ì§€ êµ¬ì¡° ìƒì„± | ë””ë ‰í† ë¦¬ êµ¬ì¡° |
| 2-2 | Stock ë„ë©”ì¸ ëª¨ë¸ | `Stock.kt`, `Sector.kt`, `MarketCapGrade.kt` |
| 2-3 | Flyway ë§ˆì´ê·¸ë ˆì´ì…˜ | `V1__create_stock_table.sql` |
| 2-4 | JPA Entity & Repository | `StockJpaEntity.kt`, `StockJpaRepository.kt` |
| 2-5 | ì‹œë“œ ë°ì´í„° ìƒì„±ê¸° | `StockSeeder.kt` (500ê°œ ì¢…ëª©) |
| 2-6 | Redis ì‹œì„¸ ìºì‹œ | `StockPriceRedisAdapter.kt` |
| 2-7 | Redis í˜¸ê°€ì°½ | `OrderBookRedisAdapter.kt` |
| 2-8 | UseCase & Service | ì¡°íšŒ ë¡œì§ êµ¬í˜„ |
| 2-9 | Controller & DTO | REST API êµ¬í˜„ |
| 2-10 | Kafka Consumer | ì´ë²¤íŠ¸/ì£¼ë¬¸ ìˆ˜ì‹  |
| 2-11 | WebSocket ì„¤ì • | ì‹œì„¸ í‘¸ì‹œ ê¸°ë°˜ |
| 2-12 | í…ŒìŠ¤íŠ¸ ì‘ì„± | Unit & Integration Tests |

### API ëª…ì„¸

| Method | Endpoint | ì„¤ëª… |
|--------|----------|------|
| GET | `/api/v1/stocks` | ì¢…ëª© ëª©ë¡ (í˜ì´ì§•, í•„í„°) |
| GET | `/api/v1/stocks/{stockId}` | ì¢…ëª© ìƒì„¸ |
| GET | `/api/v1/stocks/{stockId}/price` | í˜„ì¬ê°€ ì¡°íšŒ |
| GET | `/api/v1/stocks/{stockId}/orderbook` | í˜¸ê°€ì°½ ì¡°íšŒ |
| GET | `/api/v1/stocks/{stockId}/chart` | ì°¨íŠ¸ ë°ì´í„° (1ë¶„ë´‰) |
| WS | `/ws/stocks/price` | ì‹¤ì‹œê°„ ì‹œì„¸ êµ¬ë… |

### ì²´í¬ë¦¬ìŠ¤íŠ¸
- [ ] 500ê°œ ì¢…ëª© ì‹œë“œ ë°ì´í„° ìƒì„±
- [ ] ì¢…ëª© ëª©ë¡/ìƒì„¸ ì¡°íšŒ API ë™ì‘
- [ ] Redisì— ì‹œì„¸ ë°ì´í„° ì €ì¥/ì¡°íšŒ
- [ ] WebSocket ì‹œì„¸ í‘¸ì‹œ ë™ì‘

---

## ğŸ’° Phase 2: Trading Service

### í—¥ì‚¬ê³ ë‚  íŒ¨í‚¤ì§€ êµ¬ì¡°

```
trading-service/src/main/kotlin/com/stocksimulator/tradingservice/
â”œâ”€â”€ domain/
â”‚   â”œâ”€â”€ model/
â”‚   â”‚   â”œâ”€â”€ Order.kt
â”‚   â”‚   â”œâ”€â”€ OrderType.kt (BUY/SELL)
â”‚   â”‚   â”œâ”€â”€ OrderStatus.kt
â”‚   â”‚   â”œâ”€â”€ Trade.kt
â”‚   â”‚   â”œâ”€â”€ Balance.kt
â”‚   â”‚   â””â”€â”€ Portfolio.kt
â”‚   â””â”€â”€ repository/
â”‚       â”œâ”€â”€ OrderRepository.kt
â”‚       â”œâ”€â”€ TradeRepository.kt
â”‚       â””â”€â”€ PortfolioRepository.kt
â”œâ”€â”€ application/
â”‚   â”œâ”€â”€ port/
â”‚   â”‚   â”œâ”€â”€ in/
â”‚   â”‚   â”‚   â”œâ”€â”€ PlaceOrderUseCase.kt
â”‚   â”‚   â”‚   â”œâ”€â”€ GetOrderUseCase.kt
â”‚   â”‚   â”‚   â”œâ”€â”€ GetPortfolioUseCase.kt
â”‚   â”‚   â”‚   â””â”€â”€ GetBalanceUseCase.kt
â”‚   â”‚   â””â”€â”€ out/
â”‚   â”‚       â”œâ”€â”€ SaveOrderPort.kt
â”‚   â”‚       â”œâ”€â”€ LoadPortfolioPort.kt
â”‚   â”‚       â””â”€â”€ OrderBookPort.kt
â”‚   â””â”€â”€ service/
â”‚       â”œâ”€â”€ OrderService.kt
â”‚       â”œâ”€â”€ MatchingService.kt
â”‚       â””â”€â”€ PortfolioService.kt
â””â”€â”€ adapter/
    â”œâ”€â”€ in/
    â”‚   â””â”€â”€ web/
    â”‚       â”œâ”€â”€ OrderController.kt
    â”‚       â”œâ”€â”€ PortfolioController.kt
    â”‚       â””â”€â”€ dto/
    â”œâ”€â”€ out/
    â”‚   â”œâ”€â”€ persistence/
    â”‚   â””â”€â”€ cache/
    â””â”€â”€ event/
        â”œâ”€â”€ OrderEventProducer.kt
        â””â”€â”€ TradeEventConsumer.kt
```

### ì‘ì—… ë‹¨ê³„

| ë‹¨ê³„ | ì‘ì—… | ì‚°ì¶œë¬¼ |
|------|------|--------|
| 3-1 | íŒ¨í‚¤ì§€ êµ¬ì¡° ìƒì„± | ë””ë ‰í† ë¦¬ êµ¬ì¡° |
| 3-2 | Order/Trade ë„ë©”ì¸ | `Order.kt`, `Trade.kt` |
| 3-3 | Balance/Portfolio ë„ë©”ì¸ | `Balance.kt`, `Portfolio.kt` |
| 3-4 | Flyway ë§ˆì´ê·¸ë ˆì´ì…˜ | í…Œì´ë¸” ìƒì„± ìŠ¤í¬ë¦½íŠ¸ |
| 3-5 | JPA Entity & Repository | ì˜ì†ì„± ë ˆì´ì–´ |
| 3-6 | ì£¼ë¬¸ ì ‘ìˆ˜ ë¡œì§ | `OrderService.kt` |
| 3-7 | ì²´ê²° ì—”ì§„ | `MatchingService.kt` |
| 3-8 | ì”ê³ /í¬íŠ¸í´ë¦¬ì˜¤ ê´€ë¦¬ | `PortfolioService.kt` |
| 3-9 | Controller & DTO | REST API êµ¬í˜„ |
| 3-10 | Kafka ì—°ë™ | ì£¼ë¬¸ ìƒì„±/ì²´ê²° ì´ë²¤íŠ¸ |
| 3-11 | Redis í˜¸ê°€ì°½ ì—°ë™ | Stock Serviceì™€ ì—°ê³„ |
| 3-12 | í…ŒìŠ¤íŠ¸ ì‘ì„± | Unit & Integration Tests |

### API ëª…ì„¸

| Method | Endpoint | ì„¤ëª… |
|--------|----------|------|
| POST | `/api/v1/orders` | ì£¼ë¬¸ ìƒì„± (ë§¤ìˆ˜/ë§¤ë„) |
| GET | `/api/v1/orders` | ì£¼ë¬¸ ë‚´ì—­ ì¡°íšŒ |
| GET | `/api/v1/orders/{orderId}` | ì£¼ë¬¸ ìƒì„¸ |
| DELETE | `/api/v1/orders/{orderId}` | ì£¼ë¬¸ ì·¨ì†Œ |
| GET | `/api/v1/portfolio` | í¬íŠ¸í´ë¦¬ì˜¤ ì¡°íšŒ |
| GET | `/api/v1/balance` | ì”ê³  ì¡°íšŒ |
| GET | `/api/v1/trades` | ì²´ê²° ë‚´ì—­ ì¡°íšŒ |

### ì²´í¬ë¦¬ìŠ¤íŠ¸
- [ ] ë§¤ìˆ˜/ë§¤ë„ ì£¼ë¬¸ API ë™ì‘
- [ ] í˜¸ê°€ì°½ì— ì£¼ë¬¸ ë°˜ì˜
- [ ] ì²´ê²° ì‹œ ì”ê³  ë³€ê²½
- [ ] ì²´ê²° ì‹œ ì£¼ê°€ ë³€ë™
- [ ] Kafka ì´ë²¤íŠ¸ ë°œí–‰/ìˆ˜ì‹ 

---

## â° Phase 3-A: Scheduler Service

### ì‘ì—… ë‹¨ê³„

| ë‹¨ê³„ | ì‘ì—… | ì‚°ì¶œë¬¼ |
|------|------|--------|
| 4-1 | ê¸°ê´€ íˆ¬ìì ë„ë©”ì¸ | `Institution.kt`, `InvestmentStyle.kt` |
| 4-2 | ê°œì¸ NPC ë„ë©”ì¸ | `NpcInvestor.kt` |
| 4-3 | íˆ¬ì ê·œì¹™ ì—”ì§„ | `InvestmentRuleEngine.kt` |
| 4-4 | ìŠ¤ì¼€ì¤„ë§ ë¡œì§ | ê²Œì„ ì‹œê°„ ê¸°ë°˜ ìë™ ë§¤ë§¤ |
| 4-5 | ìˆ˜ì… ì§€ê¸‰ ë¡œì§ | ì¼ê¸‰/ì£¼ê¸‰ ìë™ ì§€ê¸‰ |
| 4-6 | Kafka Producer | `schedule.trade` ë°œí–‰ |
| 4-7 | í…ŒìŠ¤íŠ¸ ì‘ì„± | Unit & Integration Tests |

### ì²´í¬ë¦¬ìŠ¤íŠ¸
- [ ] 10ê°œ ê¸°ê´€ íˆ¬ìì ìƒì„±
- [ ] 1,000ëª… NPC íˆ¬ìì ìƒì„±
- [ ] ìë™ ë§¤ë§¤ ë¡œì§ ë™ì‘
- [ ] ìˆ˜ì… ì§€ê¸‰ ë™ì‘

---

## ğŸ¯ Phase 3-B: Event Service

### ì‘ì—… ë‹¨ê³„

| ë‹¨ê³„ | ì‘ì—… | ì‚°ì¶œë¬¼ |
|------|------|--------|
| 5-1 | Event ë„ë©”ì¸ | `Event.kt`, `EventLevel.kt`, `Sentiment.kt` |
| 5-2 | MongoDB ì„¤ì • | ì´ë²¤íŠ¸ ì €ì¥ì†Œ |
| 5-3 | ì´ë²¤íŠ¸ ìƒì„± ë¡œì§ | ëœë¤ ì´ë²¤íŠ¸ ë°œìƒ |
| 5-4 | ì£¼ê°€ ì˜í–¥ ê³„ì‚° | ì´ë²¤íŠ¸ â†’ ì£¼ê°€ ë³€ë™ |
| 5-5 | Kafka Producer | `event.occurred` ë°œí–‰ |
| 5-6 | Controller & DTO | REST API êµ¬í˜„ |
| 5-7 | í…ŒìŠ¤íŠ¸ ì‘ì„± | Unit & Integration Tests |

### ì²´í¬ë¦¬ìŠ¤íŠ¸
- [ ] ì´ë²¤íŠ¸ ìë™ ìƒì„±
- [ ] ì´ë²¤íŠ¸ ë°œìƒ ì‹œ Kafka ì´ë²¤íŠ¸ ë°œí–‰
- [ ] Stock Serviceì—ì„œ ì£¼ê°€ ë°˜ì˜

---

## ğŸ“° Phase 3-C: News Service

### ì‘ì—… ë‹¨ê³„

| ë‹¨ê³„ | ì‘ì—… | ì‚°ì¶œë¬¼ |
|------|------|--------|
| 6-1 | News ë„ë©”ì¸ | `News.kt` |
| 6-2 | MongoDB ì„¤ì • | ë‰´ìŠ¤ ì €ì¥ì†Œ |
| 6-3 | Elasticsearch ì—°ë™ | ë‰´ìŠ¤ ê²€ìƒ‰ |
| 6-4 | Kafka Consumer | `event.occurred` ìˆ˜ì‹  |
| 6-5 | ë‰´ìŠ¤ ìƒì„± ë¡œì§ | ì´ë²¤íŠ¸ â†’ ë‰´ìŠ¤ ë³€í™˜ |
| 6-6 | Controller & DTO | REST API êµ¬í˜„ |
| 6-7 | í…ŒìŠ¤íŠ¸ ì‘ì„± | Unit & Integration Tests |

### API ëª…ì„¸

| Method | Endpoint | ì„¤ëª… |
|--------|----------|------|
| GET | `/api/v1/news` | ë‰´ìŠ¤ ëª©ë¡ (í˜ì´ì§•, í•„í„°) |
| GET | `/api/v1/news/{newsId}` | ë‰´ìŠ¤ ìƒì„¸ |
| GET | `/api/v1/news/search` | ë‰´ìŠ¤ ê²€ìƒ‰ |

### ì²´í¬ë¦¬ìŠ¤íŠ¸
- [ ] ì´ë²¤íŠ¸ ë°œìƒ ì‹œ ë‰´ìŠ¤ ìë™ ìƒì„±
- [ ] ë‰´ìŠ¤ ì¡°íšŒ/ê²€ìƒ‰ API ë™ì‘
- [ ] Elasticsearch ê²€ìƒ‰ ë™ì‘

---

## ğŸ† Phase 4: Season Service

### ì‘ì—… ë‹¨ê³„

| ë‹¨ê³„ | ì‘ì—… | ì‚°ì¶œë¬¼ |
|------|------|--------|
| 7-1 | Season ë„ë©”ì¸ | `Season.kt`, `Ranking.kt` |
| 7-2 | Flyway ë§ˆì´ê·¸ë ˆì´ì…˜ | í…Œì´ë¸” ìƒì„± ìŠ¤í¬ë¦½íŠ¸ |
| 7-3 | Redis ë­í‚¹ | Sorted Set ê¸°ë°˜ |
| 7-4 | ë­í‚¹ ê³„ì‚° ë¡œì§ | ìˆ˜ìµë¥ /ì´ìì‚°/ê±°ë˜ëŸ‰ |
| 7-5 | Kafka Consumer | `order.matched` ìˆ˜ì‹  |
| 7-6 | ì‹œì¦Œ ì¢…ë£Œ ì²˜ë¦¬ | ë­í‚¹ í™•ì •, ë°ì´í„° ë¦¬ì…‹ |
| 7-7 | Controller & DTO | REST API êµ¬í˜„ |
| 7-8 | WebSocket | ë­í‚¹ ë³€ë™ í‘¸ì‹œ |
| 7-9 | í…ŒìŠ¤íŠ¸ ì‘ì„± | Unit & Integration Tests |

### API ëª…ì„¸

| Method | Endpoint | ì„¤ëª… |
|--------|----------|------|
| GET | `/api/v1/seasons` | ì‹œì¦Œ ëª©ë¡ |
| GET | `/api/v1/seasons/current` | í˜„ì¬ ì‹œì¦Œ ì •ë³´ |
| GET | `/api/v1/ranking` | ì‹¤ì‹œê°„ ë­í‚¹ |
| GET | `/api/v1/ranking/my` | ë‚´ ë­í‚¹ |
| WS | `/ws/ranking` | ì‹¤ì‹œê°„ ë­í‚¹ êµ¬ë… |

### ì²´í¬ë¦¬ìŠ¤íŠ¸
- [ ] ì‹¤ì‹œê°„ ë­í‚¹ ì¡°íšŒ
- [ ] ê±°ë˜ ì‹œ ë­í‚¹ ê°±ì‹ 
- [ ] ì‹œì¦Œ íˆìŠ¤í† ë¦¬ ì €ì¥
- [ ] WebSocket ë­í‚¹ í‘¸ì‹œ

---

## ğŸ”„ Kafka í† í”½ & ì´ë²¤íŠ¸ ì •ì˜

### í† í”½ ëª©ë¡

| Topic | Producer | Consumer | í˜ì´ë¡œë“œ |
|-------|----------|----------|----------|
| `order.created` | Trading | Stock | `OrderCreatedEvent` |
| `order.matched` | Stock | Trading, Season | `OrderMatchedEvent` |
| `order.cancelled` | Trading | Stock | `OrderCancelledEvent` |
| `price.updated` | Stock | - (WS) | `PriceUpdatedEvent` |
| `event.occurred` | Event | Stock, News | `EventOccurredEvent` |
| `news.created` | News | - (WS) | `NewsCreatedEvent` |
| `schedule.trade` | Scheduler | Trading | `ScheduleTradeEvent` |
| `ranking.updated` | Season | - (WS) | `RankingUpdatedEvent` |
| `user.created` | User | - | `UserCreatedEvent` |

### ì´ë²¤íŠ¸ DTO (common ëª¨ë“ˆ)

```kotlin
// common/event/OrderCreatedEvent.kt
data class OrderCreatedEvent(
    val orderId: String,
    val userId: String,
    val stockId: String,
    val orderType: String,  // BUY, SELL
    val quantity: Long,
    val price: Long?,       // null = ì‹œì¥ê°€
    val createdAt: Instant
)

// common/event/OrderMatchedEvent.kt
data class OrderMatchedEvent(
    val tradeId: String,
    val buyOrderId: String,
    val sellOrderId: String,
    val stockId: String,
    val price: Long,
    val quantity: Long,
    val matchedAt: Instant
)

// common/event/EventOccurredEvent.kt
data class EventOccurredEvent(
    val eventId: String,
    val level: String,      // SOCIETY, INDUSTRY, COMPANY
    val targetSector: String?,
    val targetStockId: String?,
    val sentiment: String,  // POSITIVE, NEGATIVE, NEUTRAL
    val intensity: Double,
    val headline: String,
    val occurredAt: Instant
)
```

---

## ğŸ“‹ ì‘ì—… ì§„í–‰ ì²´í¬ë¦¬ìŠ¤íŠ¸

### Phase 0: ì¸í”„ë¼
- [ ] Eureka Server ì™„ì„±
- [ ] API Gateway ë¼ìš°íŒ… ì„¤ì •
- [ ] ê³µí†µ ëª¨ë“ˆ ê³ ë„í™”

### Phase 1: í•µì‹¬ ì„œë¹„ìŠ¤
- [ ] User Service ì™„ì„±
- [ ] Stock Service ì™„ì„±

### Phase 2: ê±°ë˜ ì‹œìŠ¤í…œ
- [ ] Trading Service ì™„ì„±
- [ ] ì²´ê²° ì—”ì§„ ë™ì‘

### Phase 3: ìë™í™” & ì´ë²¤íŠ¸
- [ ] Scheduler Service ì™„ì„±
- [ ] Event Service ì™„ì„±
- [ ] News Service ì™„ì„±

### Phase 4: ì‹œì¦Œ & ë­í‚¹
- [ ] Season Service ì™„ì„±

### Phase 5: í†µí•© í…ŒìŠ¤íŠ¸
- [ ] ì „ì²´ ì„œë¹„ìŠ¤ ì—°ë™ í…ŒìŠ¤íŠ¸
- [ ] ë¶€í•˜ í…ŒìŠ¤íŠ¸

---

## ğŸ“š ì°¸ê³  ëª…ë ¹ì–´

```bash
# ì „ì²´ ë¹Œë“œ
./gradlew build

# íŠ¹ì • ì„œë¹„ìŠ¤ ì‹¤í–‰
./gradlew :backend:eureka-server:bootRun
./gradlew :backend:api-gateway:bootRun
./gradlew :backend:user-service:bootRun
./gradlew :backend:stock-service:bootRun
./gradlew :backend:trading-service:bootRun
./gradlew :backend:event-service:bootRun
./gradlew :backend:news-service:bootRun
./gradlew :backend:scheduler-service:bootRun
./gradlew :backend:season-service:bootRun

# í…ŒìŠ¤íŠ¸ ì‹¤í–‰
./gradlew test
./gradlew :backend:user-service:test

# Docker í™˜ê²½ ì‹œì‘
docker-compose up -d
```

---

*ë¬¸ì„œ ë²„ì „: v1.0*  
*ìµœì¢… ìˆ˜ì •ì¼: 2025ë…„ 1ì›”*
