# =============================================================================
# ArgoCD Project - Stock Simulator
# =============================================================================
---
apiVersion: argoproj.io/v1alpha1
kind: AppProject
metadata:
  name: stocksim
  namespace: argocd
  finalizers:
    - resources-finalizer.argocd.argoproj.io
spec:
  description: Stock Simulator Project
  
  # 소스 Git 저장소 (본인 저장소 URL로 변경 필요)
  sourceRepos:
    - 'https://github.com/YOUR_USERNAME/Stock-Simulator.git'
    - '*'  # 개발 중에는 모든 저장소 허용
  
  # 배포 가능한 대상 클러스터 및 네임스페이스
  destinations:
    - namespace: stocksim-apps
      server: https://kubernetes.default.svc
    - namespace: stocksim-db
      server: https://kubernetes.default.svc
    - namespace: stocksim-infra
      server: https://kubernetes.default.svc
    - namespace: stocksim-monitoring
      server: https://kubernetes.default.svc
    - namespace: argocd
      server: https://kubernetes.default.svc
  
  # 클러스터 리소스 허용 (Namespace, ClusterRole 등)
  clusterResourceWhitelist:
    - group: ''
      kind: Namespace
    - group: rbac.authorization.k8s.io
      kind: ClusterRole
    - group: rbac.authorization.k8s.io
      kind: ClusterRoleBinding
    - group: networking.k8s.io
      kind: IngressClass
  
  # 네임스페이스 리소스 허용
  namespaceResourceWhitelist:
    - group: '*'
      kind: '*'
  
  # Orphaned Resources 모니터링
  orphanedResources:
    warn: true
